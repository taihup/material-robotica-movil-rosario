\begin{frame}
	\frametitle{Material para armado de estas slides}
	Curso de Cyrill Stachniss: \url{https://youtu.be/v-Rm9TUG9LA}

\end{frame}

\begin{frame}
    \frametitle{Mapas Grilla de Ocupación (Occupancy Grid Maps)}
    \note{información extraída de https://youtu.be/v-Rm9TUG9LA}
    
    \begin{itemize}
    \item Representación del entorno que usan en general los robots móviles.
    \item Estos tipos de mapas almacenan información sobre que áreas del mapa están ocupados (hay obstáculos) y cuales están libres (se pueden navegar). Se los puede pensar como un ``plano del lugar''.
    \item Permiten realizar planeamiento de caminos.
    \end{itemize}
   
\end{frame}

\begin{frame}
    \frametitle{Motivación: Para qué Mapear}
    \note{información extraída de https://youtu.be/v-Rm9TUG9LA}
    
    \begin{itemize}
        \item Los mapas son requeridos para la mayoría de las tareas de robótica como localización, planeamiento, etc.
        \item Tareas que requieren un entendimiento del entorno (información semántica)
        \item Aprender mapas a partir de mediciones de los sensores es una de las tareas fundamentales de las robótica móvil
    \end{itemize}
    
\end{frame}

\begin{frame}
    \frametitle{Sensores para la creación de mapas}
    \note{información extraída de https://youtu.be/v-Rm9TUG9LA}
    
    \note{Sensores exteoceptivos que nos permiten medir el entorno}
 	
   	\begin{figure}[!h]
    		\centering
    		\subfloat[]
    		{
    			\includegraphics[width=0.15\columnwidth]{./images/flir_blackfly_s_camera.jpg}
    		}
    		\subfloat[]
    		{
    			\includegraphics[width=0.2\columnwidth]{./images/stereo_camera_zed.png}
    		}
    		\subfloat[]
    		{
    			\includegraphics[width=0.1\columnwidth]{./images/ladybug5plus_360_camera.png}
    		}
    		\subfloat[]
    		{
    			\includegraphics[width=0.2\columnwidth]{./images/structured_light_kinect.png}
    		}\\
		   	\subfloat[]
    		{
    			\includegraphics[width=0.15\columnwidth]{./images/terabee_time_of_flight_camera.png}
	    	}
    		\subfloat[]
    		{
    			\includegraphics[width=0.2\columnwidth]{./images/event_camera_dvs128.png}
    		}
    		\subfloat[]
    		{
    			\includegraphics[width=0.15\columnwidth]{./images/lidar_sick.jpg}
    		}
	   		\subfloat[]
    		{
    			\includegraphics[width=0.15\columnwidth]{./images/velodyne_puck.png}
    		}
    	\end{figure}
    
\end{frame}

\begin{frame}
    \frametitle{Mapas Volumétricos vs Features}
    \note{información extraída de https://youtu.be/v-Rm9TUG9LA}
    
    \note{Los feature maps almacen puntos distintivos del entorno}
    
    \note{El feature map correspnode a un trabajo deEduardo Nebot en el victorial park. Los puntos amarillso son los troncos de los árboles.}
    
    \note{El feature map son útiles únicamente para localizarse pero no para navegar por el entorno ya que se desconoce que hay entre los puntos.}
    
    \note{Los mapas volumétricos 2d pueden ser vistos como un plano del piso de la habitación}
    
    \note{Los mapas volumétricos explicitamente representan las áreas libres del entorno.}
    
   	\begin{figure}[!h]
    	\centering
    	\subfloat[Mapa Volumétrico 2D (Grid map)]
    	{
    		\includegraphics[width=0.23\columnwidth]{./images/volumetric_map_2d.png}
    	}
    	\subfloat[Mapa Volumétrico 3D (Voxel map)]
    	{
    		\includegraphics[width=0.3\columnwidth]{./images/volumetric_map_3d.png}
    	}
    	\subfloat[Mapa de features 2D]
    	{
    		\includegraphics[width=0.3\columnwidth]{./images/feature_map_2d.png}
    	}
    \end{figure}
    
\end{frame}


\begin{frame}
    \frametitle{Mapa de Nube de puntos (Point Cloud Map)}
    \note{información extraída de https://youtu.be/v-Rm9TUG9LA}
    
    
   	\begin{figure}
    	\includegraphics[width=0.6\columnwidth]{./images/point_cloud_map_bremen_city.png}
    \end{figure}
    
\end{frame}


\begin{frame}
	\frametitle{Mapa Semántico (Semantic Map)}
	\note{información extraída de https://youtu.be/v-Rm9TUG9LA}
	
   	\begin{figure}
    	\includegraphics[width=0.8\columnwidth]{./images/semantic_map_semanticfusion.png}
	\end{figure}
	
\end{frame}


\begin{frame}
	\frametitle{Mapa Topológico}
	\note{información extraída de https://youtu.be/v-Rm9TUG9LA}
	
	\begin{figure}
		\includegraphics[width=0.8\columnwidth]{./images/topological_map.pdf}
	\end{figure}
	
\end{frame}

\begin{frame}
    \frametitle{Recontrucción de mapas}
    \note{información extraída de https://youtu.be/v-Rm9TUG9LA}
    
    \begin{itemize}
        \item Computar el mapa más probable dado las mediciones de los sensores
        \begin{equation*}
            \map^{*} = \argmax p(\map | \controlCommand_{1}, \observation_{1}, \dots, \controlCommand_{t}, \observation_{t})
        \end{equation*}
        \item Sin embargo, vamos a abordar un problema más simple: veamos cómo computar el mapa dada la pose del robot (la localización resuelta) y las mediciones de los sensores.
        \begin{equation*}
            \map^{*} = \argmax p(\map | \state_{1}, \observation_{1}, \dots, \state_{t}, \observation_{t})
        \end{equation*}
    \end{itemize}

    \alert{Resolver la localización y el mapeo al mismo tiempo es resolver el problema de SLAM, y lo veremos más adelante.}
    
\end{frame}

\begin{frame}
    \frametitle{Grid Maps}
    \note{información extraída de https://youtu.be/v-Rm9TUG9LA}
    
    \note{}
    
    \begin{itemize}
        \item Modelos de mapa de ocupación del espacio
        \item Discretiza el mundo en celdas
        \item La estructura de la grilla está fija (el tamaño de las celdas y la grilla es fijo)
        \item Cada celda puede estar ocupada o libre
        \item Modelo no-paramétrico (es decir, una celda no está parametrizada como una gaussiana por ejemplo sino que está libre u ocupada)
        \item El tamaño de los mapas de grilla puede requerir mucha memoria (en el caso 3D sobre todo)
        \item No requiere de un detector de features específico (sino que utilizamos las mediciones crudas del sensor)
    \end{itemize}
\end{frame}

\begin{frame}
    \frametitle{Ejemplo de Mapa de Grilla de Ocupación}
    \note{información extraída de https://youtu.be/v-Rm9TUG9LA}
    
    Podemos representar a un \emph{Occupancy Grid Map} con una imagen donde un píxel es blanco si está libre y negro si está ocupado (hay algún objeto). Un píxel gris representa un espacio que no conocemos.
    
  	\begin{figure}[!h]
    		\includegraphics[width=0.23\columnwidth]{./images/volumetric_map_2d.png}
    \end{figure}


	Los \emph{Occupancy Grid Maps} hacen asunciones acerca del mundo.
       
\end{frame}

\begin{frame}
    \frametitle{Asunciones Occupancy Grid Maps}
    \note{información extraída de https://youtu.be/v-Rm9TUG9LA}
    
    \begin{block}{Asunción 1}
	    El área de una celda esta o completamente libre u ocupada.
    \end{block}

	Esta asunción no sucede en la realidad ya que puede haber objetos que sean menores que el tamaño de la celda u objetos que cubran parcialmente una celda.
	
  	\begin{figure}[!h]
		\includegraphics[width=0.7\columnwidth]{./images/grid_map.pdf}
	\end{figure}
	
\end{frame}

\begin{frame}
	\frametitle{Representación: Probabilidad de Ocupación}
	\note{información extraída de https://youtu.be/v-Rm9TUG9LA}

	\begin{itemize}
	\item Cada celda es una {\bf variable aleatoria binaria} que modela la ocupación de la celda.
	\item La celda está ocupada: $p(\map_{i}) = 1$
	\item La celda está libre: $p(\map_{i}) = 0$
	\item No tenemos información: $p(\map_{i}) = 0.5$
	\end{itemize}
	
	\begin{figure}[!h]
		\includegraphics[width=0.7\columnwidth]{./images/grid_map_representation.pdf}
	\end{figure}
\end{frame}

\begin{frame}
    \frametitle{Probabilidad de Ocupación}
    \note{información extraída de https://youtu.be/v-Rm9TUG9LA}
   	\begin{itemize}
    	\item Cada celda es una {\bf variable aleatoria binaria} que modela la ocupación de la celda.
    	\item Notación:
   	   	\begin{itemize}
    		\item La probabilidad de que la celta este ocupada, la notamos:\\ $P(\mapRandomVariable_{i} = occ) = P_{occ}(\mapRandomVariable_{i}) = p(\map_{i})$
    		\item La probabilidad de que la celta este libre, la notamos:\\ $P(\mapRandomVariable_{i} = free) = P_{free}(\mapRandomVariable_{i}) = 1 - P_{occ}(\mapRandomVariable{i}) = p(\neg \map_{i})$
    	\end{itemize}
    \end{itemize}
    
\end{frame}

\begin{frame}
    \frametitle{Asunción 2}
    \note{información extraída de https://youtu.be/v-Rm9TUG9LA}
    El mundo es estático.
    
     	\begin{figure}[!h]
    	\includegraphics[width=0.7\columnwidth]{./images/grid_map_static_assumption.pdf}
    \end{figure}
    
    Esto no es cierto en la práctica ya que hay objetos que se mueven por el entorno o el entorno es modificado (personas caminando, objetos que se mueven de un lugar a otro, etc).
    
\end{frame}

\begin{frame}
	\frametitle{Asunción 3}
	\note{información extraída de https://youtu.be/v-Rm9TUG9LA}
	Las celdas (las variables aleatorias) son independientes entre sí.
	
	\begin{figure}[!h]
		\includegraphics[width=0.7\columnwidth]{./images/grid_map_independency_assumption.pdf}
	\end{figure}
	
	Nuevamente esto no es cierto en el la práctica, pero asumimos esta independencia para simplificar el modelo.
	
\end{frame}

\begin{frame}
    \frametitle{Distribución conjunta}
    \note{información extraída de https://youtu.be/v-Rm9TUG9LA}
    
    Un mapa de ocupación entonces es la distribución de probabilidad representando todo el mapa del entorno. La distribución de probabilidad de todo el mapa es la probabilidad conjunta (\emph{joint belief}) del valor de todas las celdas individuales.
    
   	\begin{figure}[!h]
    	\includegraphics[width=0.5\columnwidth]{./images/joint_distribution.pdf}
    \end{figure}
    
\end{frame}

\begin{frame}
    \frametitle{Representación}
    \note{información extraída de https://youtu.be/v-Rm9TUG9LA}
    La distribución de probabilidad del mapa esta dada por el producto de las celdas.
    
   	\begin{figure}[!h]
    	\includegraphics[width=0.3\columnwidth]{./images/map_probability_distribution.pdf}
    \end{figure}
    
\end{frame}

\begin{frame}
	\frametitle{Estimando un Mapa por medio de mediciones}
	\note{información extraída de https://youtu.be/v-Rm9TUG9LA}
	
	Dadas las mediciones $\observation_{i:t}$ y las poses $\state_{1:t}$ del sensor, estimamos el mapa como
	
	\begin{equation*}
		p(\map | \observation_{1:t}, \state_{1:t}) = \prod_{i} p(\map_{i} | \observation_{1:t}, \state_{1:t})
	\end{equation*}
	
\end{frame}
